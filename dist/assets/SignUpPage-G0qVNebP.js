import{r as i,u as I,j as s,k as C,a4 as E,a5 as g,a6 as f,a7 as F,a8 as W,S as T,$ as G,f as L,g as q,o as B,a9 as a,aa as U,ab as m,ac as b,ad as O,ae as z}from"./index-BwPW9mmE.js";const Y=()=>{const[l,w]=i.useState(""),[n,v]=i.useState(""),[o,x]=i.useState(""),[t,k]=i.useState(""),[c,j]=i.useState(""),[p,S]=i.useState(!1),u=I(),N=async()=>{if(!l||!n||!o||!t||!c){a({title:"Missing Fields",message:"Please fill out all fields.",color:"red",position:"top-center"});return}if(!o.includes("@")||!o.includes(".")){a({title:"Invalid Email",message:"Please enter a valid email address.",color:"red",position:"top-center"});return}if(t.length<6){a({title:"Weak Password",message:"Password must be at least 6 characters.",color:"red",position:"top-center"});return}if(t!==c){a({title:"Password Mismatch",message:"Passwords do not match.",color:"red",position:"top-center"});return}try{const r=(await U(m,o,t)).user;console.log("✅ Firebase sign-up success:",r);const h=await fetch("http://localhost:3000/api/users",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({first_name:l,last_name:n,email:o,password:t})}),d=await h.json();if(!h.ok)throw new Error(d.error||"Failed to create user in backend.");localStorage.setItem("userId",d.user_id),localStorage.setItem("firstName",l),localStorage.setItem("lastName",n),localStorage.setItem("email",o),localStorage.setItem("password",t),console.log("✅ User created in backend:",d),a({title:"Signed up!",message:"Continue personalizing your profile.",color:"green"}),u("/personal-look")}catch(e){console.error("❌ Sign-up error:",e.message),e.message.includes("email-already-in-use")?a({title:"Email already exists",message:"Please use a different email or login instead.",color:"red"}):a({title:"Sign-up error",message:e.message,color:"red"})}},y=async()=>{try{const r=(await b(m,z)).user;console.log("✅ Google sign-in success:",r),a({title:"Logged in with Google",message:`Welcome ${r.displayName||"back"}!`,color:"green"}),u("/personal-look")}catch(e){console.error("❌ Google sign-in error:",e.message),a({title:"Google sign-in error",message:e.message,color:"red"})}},P=async()=>{try{const r=(await b(m,O)).user;console.log("✅ Facebook sign-in success:",r),a({title:"Logged in with Facebook",message:`Welcome ${r.displayName||"back"}!`,color:"green"}),u("/personal-look")}catch(e){console.error("❌ Facebook sign-in error:",e.message),a({title:"Facebook sign-in error",message:e.message,color:"red"})}};return s.jsxs("div",{className:"signup-page",children:[s.jsx(C,{}),s.jsx(E,{active:0}),s.jsx("h2",{children:"Sign-up"}),s.jsx("p",{children:"Create a new account"}),s.jsx(g,{label:"First Name",placeholder:"Your first name",value:l,onChange:e=>w(e.currentTarget.value),className:"input-field",required:!0}),s.jsx(g,{label:"Last Name",placeholder:"Your last name",value:n,onChange:e=>v(e.currentTarget.value),className:"input-field",required:!0}),s.jsx(g,{label:"Email",placeholder:"Your email...",value:o,onChange:e=>x(e.currentTarget.value),className:"input-field",required:!0}),s.jsx(f,{label:"Password",placeholder:"Enter your password...",visible:p,onVisibilityChange:()=>S(!p),visibilityToggleIcon:({reveal:e})=>e?s.jsx(F,{size:16}):s.jsx(W,{size:16}),value:t,onChange:e=>k(e.currentTarget.value),className:"input-field",required:!0}),s.jsx(f,{label:"Confirm Password",placeholder:"Confirm your password",value:c,onChange:e=>j(e.currentTarget.value),className:"input-field",required:!0}),s.jsx(T,{fullWidth:!0,onClick:N}),s.jsxs("div",{className:"social-register-section",children:[s.jsx(G,{className:"social-divider",label:"Or register with",labelPosition:"center"}),s.jsxs("div",{className:"social-buttons",children:[s.jsx(L,{fullWidth:!0,onClick:P}),s.jsx(q,{fullWidth:!0,onClick:y})]}),s.jsx("div",{className:"login-link",children:s.jsx(B,{to:"/login",children:"Already have an account? Log in"})})]})]})};export{Y as default};
