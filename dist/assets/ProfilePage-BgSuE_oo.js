import{r as d,I as z,t as S,v as _,x as w,j as e,w as P,P as M,s as Z,z as U,D as T,u as $,a2 as L,Y as f,G as V,B as x,Z as g}from"./index-BwPW9mmE.js";import{B as Y}from"./BasketButton-CKrIXzCL.js";import{N as q}from"./Navbar-CKOp1m-K.js";import"./Image-BJWYdlJl.js";const G=d.createContext(null),D=G.Provider;function J(){return{withinGroup:!!d.useContext(G)}}var m={group:"m_11def92b",root:"m_f85678b6",image:"m_11f8ac07",placeholder:"m_104cd71f"};const O={},Q=w((s,{spacing:r})=>({group:{"--ag-spacing":M(r)}})),N=z((s,r)=>{const a=S("AvatarGroup",O,s),{classNames:t,className:p,style:n,styles:u,unstyled:l,vars:c,spacing:o,...i}=a,v=_({name:"AvatarGroup",classes:m,props:a,className:p,style:n,classNames:t,styles:u,unstyled:l,vars:c,varsResolver:Q,rootSelector:"group"});return e.jsx(D,{value:!0,children:e.jsx(P,{ref:r,...v("group"),...i})})});N.classes=m;N.displayName="@mantine/core/AvatarGroup";function H(s){return e.jsx("svg",{...s,"data-avatar-placeholder-icon":!0,viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{d:"M0.877014 7.49988C0.877014 3.84219 3.84216 0.877045 7.49985 0.877045C11.1575 0.877045 14.1227 3.84219 14.1227 7.49988C14.1227 11.1575 11.1575 14.1227 7.49985 14.1227C3.84216 14.1227 0.877014 11.1575 0.877014 7.49988ZM7.49985 1.82704C4.36683 1.82704 1.82701 4.36686 1.82701 7.49988C1.82701 8.97196 2.38774 10.3131 3.30727 11.3213C4.19074 9.94119 5.73818 9.02499 7.50023 9.02499C9.26206 9.02499 10.8093 9.94097 11.6929 11.3208C12.6121 10.3127 13.1727 8.97172 13.1727 7.49988C13.1727 4.36686 10.6328 1.82704 7.49985 1.82704ZM10.9818 11.9787C10.2839 10.7795 8.9857 9.97499 7.50023 9.97499C6.01458 9.97499 4.71624 10.7797 4.01845 11.9791C4.97952 12.7272 6.18765 13.1727 7.49985 13.1727C8.81227 13.1727 10.0206 12.727 10.9818 11.9787ZM5.14999 6.50487C5.14999 5.207 6.20212 4.15487 7.49999 4.15487C8.79786 4.15487 9.84999 5.207 9.84999 6.50487C9.84999 7.80274 8.79786 8.85487 7.49999 8.85487C6.20212 8.85487 5.14999 7.80274 5.14999 6.50487ZM7.49999 5.10487C6.72679 5.10487 6.09999 5.73167 6.09999 6.50487C6.09999 7.27807 6.72679 7.90487 7.49999 7.90487C8.27319 7.90487 8.89999 7.27807 8.89999 6.50487C8.89999 5.73167 8.27319 5.10487 7.49999 5.10487Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})})}function K(s){let r=0;for(let a=0;a<s.length;a+=1){const t=s.charCodeAt(a);r=(r<<5)-r+t,r|=0}return r}const W=["blue","cyan","grape","green","indigo","lime","orange","pink","red","teal","violet"];function X(s,r=W){const a=K(s),t=Math.abs(a)%r.length;return r[t]}function ee(s,r=2){const a=s.split(" ");return a.length===1?s.slice(0,r).toUpperCase():a.map(t=>t[0]).slice(0,r).join("").toUpperCase()}const re={},se=w((s,{size:r,radius:a,variant:t,gradient:p,color:n,autoContrast:u,name:l,allowedInitialsColors:c})=>{const o=n==="initials"&&typeof l=="string"?X(l,c):n,i=s.variantColorResolver({color:o||"gray",theme:s,gradient:p,variant:t||"light",autoContrast:u});return{root:{"--avatar-size":T(r,"avatar-size"),"--avatar-radius":a===void 0?void 0:U(a),"--avatar-bg":o||t?i.background:void 0,"--avatar-color":o||t?i.color:void 0,"--avatar-bd":o||t?i.border:void 0}}}),j=Z((s,r)=>{const a=S("Avatar",re,s),{classNames:t,className:p,style:n,styles:u,unstyled:l,vars:c,src:o,alt:i,radius:v,color:te,gradient:oe,imageProps:h,children:k,autoContrast:le,mod:I,name:y,allowedInitialsColors:ie,...E}=a,B=J(),[R,A]=d.useState(!o),C=_({name:"Avatar",props:a,classes:m,className:p,style:n,classNames:t,styles:u,unstyled:l,vars:c,varsResolver:se});return d.useEffect(()=>A(!o),[o]),e.jsx(P,{...C("root"),mod:[{"within-group":B.withinGroup},I],ref:r,...E,children:R?e.jsx("span",{...C("placeholder"),title:i,children:k||typeof y=="string"&&ee(y)||e.jsx(H,{})}):e.jsx("img",{...h,...C("image"),src:o,alt:i,onError:F=>{var b;A(!0),(b=h==null?void 0:h.onError)==null||b.call(h,F)}})})});j.classes=m;j.displayName="@mantine/core/Avatar";j.Group=N;const ae="/assets/header-shape-BscV2AY3.png";function ue(){const s=$(),[r,a]=d.useState(null),[t,p]=d.useState(!0),[n,u]=d.useState(!1),l=localStorage.getItem("userId");return d.useEffect(()=>{(async()=>{if(!l){s("/login");return}try{const o=await fetch(`http://localhost:3000/api/users/${l}`),i=await o.text(),v=JSON.parse(i);if(!o.ok)throw new Error(v.error||"Failed to fetch profile");a(v)}catch{s("/login")}finally{p(!1)}})()},[s,l]),t?e.jsx("div",{className:"profile-page",children:e.jsx(L,{size:"xl",color:"pink"})}):r?e.jsxs("div",{className:"profile-page",children:[e.jsxs("div",{className:"profile-page__header",children:[e.jsx("img",{src:ae,alt:"","aria-hidden":"true",className:"profile-page__header-bg"}),e.jsxs(V,{className:"profile-page__header-content",position:"apart",spacing:"xl",children:[e.jsx(x,{className:"edit-profile-btn",variant:"subtle",onClick:()=>s("/profile/edit"),children:"Edit Profile"}),e.jsx(Y,{refresh:!0})]}),e.jsx(g,{order:2,className:"profile-page__header-name",children:r.first_name})]}),e.jsxs("div",{className:"profile-info",children:[e.jsx(j,{src:r.profile_image||"https://via.placeholder.com/150",alt:"Profile Picture",size:"xl",radius:"xl",mb:"md"}),e.jsx(g,{order:3,className:"section-header",children:"For you"}),e.jsx(g,{order:4,style:{cursor:"pointer",color:"#4e7bff"},onClick:()=>u(c=>!c),children:"Personal Info"}),n&&e.jsxs(e.Fragment,{children:[e.jsxs(f,{children:["Email: ",r.email||"N/A"]}),e.jsxs(f,{children:["Phone: ",r.phone||"N/A"]}),e.jsxs(f,{children:["Address: ",r.address_1||"N/A"]}),e.jsxs(f,{children:["Birthday: ",r.birthdate||"N/A"]}),e.jsxs(f,{children:["Country: ",r.country||"N/A"]})]}),e.jsx("hr",{className:"divider"}),e.jsx(x,{onClick:()=>s("/profile/favorites"),children:"Favorites"}),e.jsx("hr",{className:"divider"}),e.jsx(g,{order:4,mt:"xl",className:"section-header",children:"Settings"}),e.jsx(x,{variant:"subtle",onClick:()=>s("/contact-support"),children:"Contact Support"}),e.jsx("hr",{className:"divider"}),e.jsx(x,{variant:"subtle",onClick:()=>s("/terms-of-service"),children:"Terms of Service"}),e.jsx("hr",{className:"divider"}),e.jsx(x,{variant:"subtle",onClick:()=>s("/faq"),children:"FAQ"}),e.jsx("hr",{className:"divider"})]}),e.jsx(q,{})]}):e.jsx("div",{className:"profile-page",children:e.jsx(f,{color:"red",children:"‚ùå Failed to load profile."})})}export{ue as default};
