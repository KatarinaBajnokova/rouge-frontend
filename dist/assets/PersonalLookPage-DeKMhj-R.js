const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-Wzv5Lk5m.js","assets/mantine-BTrqRPtO.js","assets/index-FnsQnoD5.css"])))=>i.map(i=>d[i]);
import{u,_ as k,B as g,m as h,i as f}from"./index-Wzv5Lk5m.js";import{b as a,j as o}from"./mantine-BTrqRPtO.js";const m="/assets/1look-MkZSByLH.png",x="/assets/2look-p3rcBxAE.png",L="/assets/3look-DBJAwkg1.png",j="/assets/4look-O5fj23vt.png",P=[{id:1,src:m,alt:"Look 1"},{id:2,src:x,alt:"Look 2"},{id:3,src:L,alt:"Look 3"},{id:4,src:j,alt:"Look 4"}],E=()=>{const[s,c]=a.useState(null),[r,n]=a.useState(!1),l=u();a.useEffect(()=>{k(()=>import("./index-Wzv5Lk5m.js").then(e=>e.P),__vite__mapDeps([0,1,2])).then(()=>console.log("✅ PersonalInfoPage chunk ready")).catch(e=>console.error("❌ preload failed",e))},[]);const i=e=>{c(e)},d=async()=>{if(!s){alert("Please select a look before continuing.");return}const e=localStorage.getItem("userId");if(!e){alert("User ID not found. Please log in again."),l("/login");return}try{n(!0),console.time("UPDATE_LOOK");const t=await fetch("/api/users/update",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user_id:e,look_id:s})});if(console.timeEnd("UPDATE_LOOK"),!t.ok){const p=await t.json();throw new Error(p.error||"Failed to update look.")}console.log("✅ Look ID updated in backend"),l("/personal-info")}catch(t){console.error("❌ Error updating look:",t.message),alert("Failed to update look. Please try again.")}finally{n(!1)}};return o.jsxs("div",{className:"personal-look-page",children:[o.jsx(g,{}),o.jsx(h,{active:1}),o.jsx("h2",{children:"Select a picture that resembles you"}),o.jsx("p",{children:"This will help us show products that match your appearance."}),o.jsx("div",{className:"image-grid",children:P.map(e=>o.jsx("div",{className:`image-box ${s===e.id?"selected":""}`,onClick:()=>i(e.id),children:o.jsx("img",{src:e.src,alt:e.alt})},e.id))}),o.jsx(f,{onClick:d,disabled:!s||r,loading:r})]})};export{E as default};
