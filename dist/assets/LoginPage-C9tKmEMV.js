import{r as l,u as v,j as s,k as y,a4 as I,a5 as P,a6 as S,a7 as E,a8 as L,L as N,$ as C,f as W,g as B,o as F,a9 as o,af as T,ab as d,ac as m,ad as G,ae as O}from"./index-BwPW9mmE.js";const Y=()=>{const[i,p]=l.useState(""),[t,f]=l.useState(""),[u,w]=l.useState(!1),[c,a]=l.useState(!1),g=v(),x=async(e,r)=>{try{const n=await fetch("/api/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e,password:r})}),h=await n.json();if(!n.ok)throw new Error(h.error||"Login failed");localStorage.setItem("userId",h.user_id),o({title:"Welcome back!",message:"You are now logged in.",color:"green"}),g("/homescreen")}catch(n){console.error("❌ Backend login error:",n.message),o({title:"Login error",message:n.message,color:"red"})}},b=async()=>{if(!i||!t){o({title:"Missing credentials",message:"Please enter both email and password.",color:"red"});return}a(!0);try{await T(d,i,t),await x(i,t)}catch(e){console.error("❌ Email/password login error:",e.message),o({title:"Login error",message:e.message,color:"red"})}finally{a(!1)}},j=async()=>{a(!0);try{const r=(await m(d,O)).user;console.log("✅ Google login success:",r),g("/homescreen")}catch(e){console.error("❌ Google sign-in error:",e.message),o({title:"Google sign-in error",message:e.message,color:"red"})}finally{a(!1)}},k=async()=>{a(!0);try{const r=(await m(d,G)).user;console.log("✅ Facebook login success:",r),g("/homescreen")}catch(e){console.error("❌ Facebook sign-in error:",e.message),o({title:"Facebook sign-in error",message:e.message,color:"red"})}finally{a(!1)}};return s.jsxs("div",{className:"login-page",children:[s.jsx(y,{}),s.jsx(I,{active:0}),s.jsx("h2",{children:"Log in"}),s.jsx("p",{children:"Welcome back"}),s.jsx(P,{label:"Email",placeholder:"Your email...",value:i,onChange:e=>p(e.currentTarget.value),className:"input-field"}),s.jsx(S,{label:"Password",placeholder:"Your password...",visible:u,onVisibilityChange:()=>w(!u),visibilityToggleIcon:({reveal:e})=>e?s.jsx(E,{size:16}):s.jsx(L,{size:16}),value:t,onChange:e=>f(e.currentTarget.value),className:"input-field"}),s.jsx(N,{onClick:b,loading:c}),s.jsxs("div",{className:"social-register-section",children:[s.jsx(C,{className:"social-divider",label:"Or continue with",labelPosition:"center"}),s.jsxs("div",{className:"social-buttons",children:[s.jsx(W,{fullWidth:!0,onClick:k,loading:c}),s.jsx(B,{fullWidth:!0,onClick:j,loading:c})]}),s.jsx("div",{className:"login-link",children:s.jsx(F,{to:"/signup",children:"Don't have an account? Sign up"})})]})]})};export{Y as default};
